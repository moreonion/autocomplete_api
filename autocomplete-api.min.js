var t=jQuery;class e{constructor(e,n){this.$element=e,this.settings=t.extend({},{select2:{}},n)}select2Config(){return t.extend(!0,{minimumInputLength:2,ajax:{url:Drupal.settings.autocomplete_api.endpoint,data:t=>this.buildData(t),processResults:(t,e)=>this.processResults(t,e),dataType:"json",delay:250,beforeSend:function(t){t.setRequestHeader("Authorization",Drupal.settings.autocomplete_api.apiKey)}}},this.settings.select2,{dropdownParent:this.$element.parent()})}bindSelect2(){this.$element.select2(this.select2Config())}buildData(t){return{search:t.term,count:this.settings.count,offset:((t.page||1)-1)*this.settings.count}}processResults(t,e){return{results:t.values.map(function(t){return{id:JSON.stringify(t),text:t.label}}),more:e*this.settings.count<t.total_items}}}var n=jQuery;Drupal.behaviors.autocomplete_api={attach:function(t,r){let o=r.autocomplete_api.elements;for(let r in o)new e(n(`#${r}`,t),o[r]).bindSelect2()}},Drupal.webform=Drupal.webform||{},Drupal.webform.conditionalOperatorAutocompleteEqual=function(t,e,r){var o;if(n(t).closest(".webform-conditional-hidden").length>0)return!1;try{return(o=JSON.parse(n("input",t).select2("data").id)).key===r||o.label===r}catch(t){return!1}},Drupal.webform.conditionalOperatorAutocompleteNotEqual=function(t,e,n){return!Drupal.webform.conditionalOperatorAutocompleteEqual(t,e,n)};
